<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="lmv-ui">

  <!-- CSS Rules -->
  <link rel="import" type="css" href="lmv-ui.css">

  <!-- Local DOM -->
  <template>
    <div id="viewer">
      <content select="lmv-viewer"></content>
      <lmv-model-context-menu viewer="[[viewer]]"></lmv-model-context-menu>
    </div>

    <div id="panels-wrap"></div>

    <div class="topbar-wrap">
      <div id="search" hidden$="{{!hasModelRoot}}">
        <lmv-model-search viewer="{{viewer}}" hidden$="{{!_showSearch}}"></lmv-model-search>
        <lmv-button toggle active="{{_showSearch}}">
          <iron-icon icon="search"></iron-icon>
        </lmv-button>
      </div>
      <template is="dom-if" if="{{docName}}">
        <lmv-panel header="{{docName}}" collapse no-close no-drag no-resize>
          <lmv-doc-tree viewer="{{viewer}}" viewer-elem="{{viewerElem}}"></lmv-doc-tree>
        </lmv-panel>
      </template>
    </div>

    <div class="toolbar-wrap">
      <div class="toolarea">
        <lmv-animation-player viewer="{{viewer}}" hidden$="{{!_toolarea.animation}}"></lmv-animation-player>
        <div hidden$="{{!_toolarea.explode}}">
          <div style="display: flex">
            <lmv-input-range on-value-change="_onExplode" style="flex-grow: 1"></lmv-input-range>
          </div>
        </div>
      </div>

      <div id="toolbar">
        <lmv-button toggle on-active-change="toggleTool" cmd="animation" hidden$="{{!hasAnimation}}">
          <lmv-tooltip>Animation</lmv-tooltip>
          <iron-icon icon="av:play-circle-filled"></iron-icon>
        </lmv-button>
        <lmv-button toggle on-active-change="togglePanel" cmd="ModelTree" hidden$="{{!hasModelRoot}}">
          <lmv-tooltip>Model Tree</lmv-tooltip>
          <iron-icon icon="list"></iron-icon>
        </lmv-button>
        <lmv-button toggle on-active-change="togglePanel" cmd="ModelProperty" hidden$="{{!hasModelRoot}}">
          <lmv-tooltip>Model Property</lmv-tooltip>
          <iron-icon icon="sort"></iron-icon>
        </lmv-button>
        <lmv-button-group>
          <lmv-tooltip class="btn-content">Tools</lmv-tooltip>
          <iron-icon class="btn-content" icon="build"></iron-icon>
          <div class="menu">
            <lmv-button toggle on-active-change="toggleTool" cmd="explode"><iron-icon icon="apps"></iron-icon>Explode</lmv-button>
            <lmv-button><iron-icon icon="flip-to-back"></iron-icon>Section</lmv-button>
            <lmv-button><iron-icon icon="swap-horiz"></iron-icon>Measure</lmv-button>
          </div>
        </lmv-button-group>
        <lmv-button-group>
          <lmv-tooltip class="btn-content">Share</lmv-tooltip>
          <iron-icon class="btn-content" icon="social:share"></iron-icon>
          <div class="menu">
            <lmv-button toggle on-active-change="togglePanel" cmd="LiveReview"><iron-icon icon="social:people"></iron-icon>Live Review</lmv-button>
            <lmv-button><iron-icon icon="settings-remote"></iron-icon>Remote Control</lmv-button>
          </div>
        </lmv-button-group>
        <lmv-button toggle on-active-change="togglePanel" cmd="RenderSettings">
          <lmv-tooltip>Settings</lmv-tooltip>
          <iron-icon icon="settings"></iron-icon>
        </lmv-button>
<!--         <lmv-button toggle on-active-change="togglePanel" cmd="RenderStats">
          <lmv-tooltip>Render Stats</lmv-tooltip>
          <iron-icon icon="assessment"></iron-icon>
        </lmv-button> -->
      </div>
    </div>

    <lmv-progress-bar progress="[[loadProgress]]" hidden$="[[!isLoading]]"></lmv-progress-bar>
  </template>

</dom-module>

<!-- Polymer Script -->
<script src="lmv-ui.js"></script>