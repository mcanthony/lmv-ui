<style is="custom-style">

:root {
  --iron-icon-width: 1em;
  --iron-icon-height: 1em;
}

</style>



<script>
(function() {

if (!window.LMVUI)
  window.LMVUI = {};

// for debug
LMVUI.stringToDOM = function(str) {
  var d = document.createElement("div");
  d.innerHTML = str;
  return d.firstChild;
};

// lazily get and cache viewer
var viewerElem, viewer;

LMVUI.getViewerElem = function() {
  if (viewerElem)
    return viewerElem;
  viewerElem = document.querySelector("lmv-viewer");
  if (!viewerElem) {
    console.log("ERROR: Cannot find lmv-viewer element");
    return;
  }
  return viewerElem;
};

LMVUI.getViewer = function() {
  if (viewer)
    return viewer;
  viewer = LMVUI.getViewerElem().viewer;
  if (!viewer) {
    console.log("ERROR: Cannot find viewer from lmv-viewer element");
    return;
  }
  return viewer;
};

// TODO_NOP: maybe this should be a mixin pattern

// utility function for LMV elements to find viewer, if not specified
LMVUI._getViewerReference = function(elem) {
  if (!elem.viewer) {
    console.log("WARNING: "+elem.tagName+": No viewer specified, automatically grabbing viewer");
    elem.viewer = LMVUI.getViewer();
  }
  if (!elem.viewer) {
    console.log("ERROR: "+elem.tagName+": Cannot find viewer");
  }
  return elem.viewer;
};

// utitliy function for LMV elements to handle and cleanup viewer event listeners
LMVUI._addViewerListener = function(elem, type, func) {
  elem.viewer.addEventListener(type, func);
  if (!elem._viewerListeners)
    elem._viewerListeners = {};
  elem._viewerListeners[type] = func;
};
LMVUI._cleanupViewerListeners = function(elem) {
  if (!elem._viewerListeners)
    return;

  for (var k in elem._viewerListeners) {
    elem.viewer.removeEventListener(k, elem._viewerListeners[k]);
  }
  elem._viewerListeners = undefined;
};

})(); // closure
</script>
